# Changelog


All notable changes are documented in this file.

Unreleased changes (if any) can be found in the latest [release pull-request]. 

[release pull-request]: https://github.com/jcornaz/heron/pulls?q=is%3Apr+is%3Aopen+label%3A%22autorelease%3A+pending%22


## [4.0.0](https://github.com/ManevilleF/heron/compare/v3.0.0...v4.0.0) (2022-05-14)


### ⚠ BREAKING CHANGES

* make `CollisionData` use `Vec3` normals (instead of `Vec2`) (#238)
* require rust 1.60
* **deps:** remove the `debug-3d` feature
* `CollisionEvent` and `CollisionData` no longer implement `Copy`, `Eq`, and `PartialEq`
* **deps:** require bevy 0.6 (#161)
* **debug:** The `DebugColor` resource now contains 4 colors instead of one, and no longer implement `From<Color>`
* `PhysicsSteps::duration` now returns a `PhysicsDuration` instead of `Duration`
* The `heron_rapier::rapier` module has been replaced by `heron_rapier::rapier2` in 2d and `heron_rapier::rapier3d` in 3d.
* **deps:** The `Layer` trait now ta works with `u32` instead of `u16` (effectively increasing the number of layers up to 32)
* No cargo feature is enabled by default. One must explictly choose between 2d or 3d.
* There is a new variant `HeightField` to the `CollisionShape` enum
* The `Velocity` and `Transform` are now updated during the `CoreStage::PostUpdate`. If a user-system need to run *after* the physics update, it should explicitly declares that dependency using the `PhysicsSystem` labels.
* The `CollisionEvent` now contains a pair of `CollisionData` instead of a pair of `Entity`
* The `BodyHandle` component is removed. The rapier's `RigidBodyHandle` and `ColliderHandle` are now used instead.
* Support changing time scale (#88)
* Support defining friction (#87)
* ConvexHull collision shape (#60)
* Kinematic bodies (#34)
* Allow users to run system that run synchronously with the physics step (#55)
* **deps:** update rapier requirement from ^0.5.0 to ^0.6.1 (#49)
* PhysicMaterial component (#50)

### Features

* `enhanced-determinism` feature flag ([#180](https://github.com/ManevilleF/heron/issues/180)) ([06457df](https://github.com/ManevilleF/heron/commit/06457df03db97ff5459af94b4136fd57da4d8908))
* `PhysicsWorld` system parameter that can be used for ray and shape casting ([#129](https://github.com/ManevilleF/heron/issues/129)) ([e0f8a35](https://github.com/ManevilleF/heron/commit/e0f8a35fb8809f2cae2c58913a772236b37e5ce0))
* `SensorShape` component to mark individual collision shape as sensor ([#104](https://github.com/ManevilleF/heron/issues/104)) ([fafab26](https://github.com/ManevilleF/heron/commit/fafab2611e8cb75e32eafdc0ef4c4110a579bd99))
* **2d:** Preserve Z translation ([#120](https://github.com/ManevilleF/heron/issues/120), thanks [@zicklag](https://github.com/zicklag)) ([cadba2d](https://github.com/ManevilleF/heron/commit/cadba2d8194be5dd1fe15fc29f47c0b61377c5d5))
* Acceleration component ([#68](https://github.com/ManevilleF/heron/issues/68)) ([52678fa](https://github.com/ManevilleF/heron/commit/52678fa6f53db88fd1b6494d292e388c6bbac021))
* Add 3d debugging facility ([#151](https://github.com/ManevilleF/heron/issues/151)) ([10f96b5](https://github.com/ManevilleF/heron/commit/10f96b5d10a6c9b061ce4161ef7964585dc4e286))
* Add a public constructor to `BodyHandle` ([#54](https://github.com/ManevilleF/heron/issues/54)) ([fb487df](https://github.com/ManevilleF/heron/commit/fb487dfc8a688a1ff613d34da6359bf8c38d6805))
* add CollisionLayers::all_groups and CollisionLayers::all_masks ([#210](https://github.com/ManevilleF/heron/issues/210)) ([62f87b2](https://github.com/ManevilleF/heron/commit/62f87b2a18fe523aaca6d443e2ec8aefb8ac17af))
* Add cone shape ([#158](https://github.com/ManevilleF/heron/issues/158)) ([ea5dd3b](https://github.com/ManevilleF/heron/commit/ea5dd3b5ea2bd284ac2f34d89c4fef7aac25e89b))
* Add damping component ( [#164](https://github.com/ManevilleF/heron/issues/164)) ([3f407b3](https://github.com/ManevilleF/heron/commit/3f407b3d363c64f9bd0609554a546e91e866cd29))
* add normals to `CollisionData` in events ([#189](https://github.com/ManevilleF/heron/issues/189)) ([b89446c](https://github.com/ManevilleF/heron/commit/b89446cc797b24a8a6eb86fdefcfea6b003af87b))
* Add sensor ([#33](https://github.com/ManevilleF/heron/issues/33)) ([755b8a8](https://github.com/ManevilleF/heron/commit/755b8a88d5876349b707091fef8f61907b39cfb8))
* Allow to define (multiple) collision shapes in the child entity of a rigid body ([#97](https://github.com/ManevilleF/heron/issues/97)) ([2c0a657](https://github.com/ManevilleF/heron/commit/2c0a65749740536b806e68a30ee46ce5a62717b0))
* allow to define layers for collision shapes generated by `PendingConvexCollision` ([#224](https://github.com/ManevilleF/heron/issues/224)) ([c51c5a1](https://github.com/ManevilleF/heron/commit/c51c5a1506f9fb9938d282e1fce68dcef1402551))
* Allow users to run system that run synchronously with the physics step ([#55](https://github.com/ManevilleF/heron/issues/55)) ([e0fa95a](https://github.com/ManevilleF/heron/commit/e0fa95a50d25087478e767fd1db1cb1482a6cc83))
* avoid pulling unnecessary dependencies for `enhanced-determinism` ([#236](https://github.com/ManevilleF/heron/issues/236)) ([cca0033](https://github.com/ManevilleF/heron/commit/cca00330e9aa5e2f660c341afde6a8a916560388))
* colliding entities component ([#216](https://github.com/ManevilleF/heron/issues/216)) ([2ba2108](https://github.com/ManevilleF/heron/commit/2ba210876421e9c4accee5913c02ccb891dc4e01))
* Collision layers ([#101](https://github.com/ManevilleF/heron/issues/101)) ([4a203d4](https://github.com/ManevilleF/heron/commit/4a203d43e2789413ce3ded37bba968ab3f6cbd0a))
* ConvexHull collision shape ([#60](https://github.com/ManevilleF/heron/issues/60)) ([48e17d6](https://github.com/ManevilleF/heron/commit/48e17d64f64b91a1e848fdb79a351ba791f5b08b))
* Cylinder collision shape ([#159](https://github.com/ManevilleF/heron/issues/159)) ([e584c0f](https://github.com/ManevilleF/heron/commit/e584c0f678188e7d2d19d6896d8bb1a79fa3c76a))
* **debug:** Added different colors for collision shapes ([#141](https://github.com/ManevilleF/heron/issues/141)) ([2c71703](https://github.com/ManevilleF/heron/commit/2c71703c3b17879076bc02bac066808e04724589))
* **debug:** reintroduce the 3d debug renderer (was removed when migrating to bevy 0.6) ([#214](https://github.com/ManevilleF/heron/issues/214)) ([4bcbd34](https://github.com/ManevilleF/heron/commit/4bcbd34b95426328a724ee3b8313cc72c23c3d86))
* expose CollisionData in Collisions component ([#234](https://github.com/ManevilleF/heron/issues/234)) ([96525d8](https://github.com/ManevilleF/heron/commit/96525d8aad46b4a22361b046c6476e8c876cdc8f))
* Further increase opactiy of debug color ([6a625b6](https://github.com/ManevilleF/heron/commit/6a625b6bfac3d6ef322133e23df7953075774d26))
* generate collision shapes from mesh via the `PendingConvexCollision` component (behind the `collision-from-mesh` feature flag)  ([#190](https://github.com/ManevilleF/heron/issues/190)) ([086a6a6](https://github.com/ManevilleF/heron/commit/086a6a6cffaa7d16bd1612555949446c0a07d6a8))
* HeightField collision shape ([#102](https://github.com/ManevilleF/heron/issues/102), thanks [@elegaanz](https://github.com/elegaanz)) ([cb57cf2](https://github.com/ManevilleF/heron/commit/cb57cf2b18c245a6db0925c4d435d3f02e4cce09))
* implement Reflect for PendingConvexCollision ([#213](https://github.com/ManevilleF/heron/issues/213)) ([d09192c](https://github.com/ManevilleF/heron/commit/d09192c08cf9167a3e1272ff2f92b479b30c2dc3))
* Increase opacity of the default debug color ([ed90487](https://github.com/ManevilleF/heron/commit/ed904870b99c2b70ee10d537bac7d522531c5ba9))
* Kinematic bodies ([#34](https://github.com/ManevilleF/heron/issues/34)) ([440391f](https://github.com/ManevilleF/heron/commit/440391ff69745d39e4a9b67373f3a4d39dc6575e))
* let `CollisionData::new` accept any implementation of `IntoIterator<Item=Vec2>` ([#211](https://github.com/ManevilleF/heron/issues/211)) ([df3169a](https://github.com/ManevilleF/heron/commit/df3169ac55b705a88ee363a964ea8c032dcee77a))
* make `CollisionLayers::none` and `CollisionLayers::from_bits` const functions ([#228](https://github.com/ManevilleF/heron/issues/228)) ([dbf4b30](https://github.com/ManevilleF/heron/commit/dbf4b30a229c2e22f2833c2dd0fa23eca93a74cd))
* More data in collision events ([#103](https://github.com/ManevilleF/heron/issues/103)) ([4af6298](https://github.com/ManevilleF/heron/commit/4af62983eec1d92dda0c39a1c5d424bfe22602cb))
* PhysicMaterial component ([#50](https://github.com/ManevilleF/heron/issues/50)) ([ddc8830](https://github.com/ManevilleF/heron/commit/ddc8830ad124c868a8def99ce78f282fde489857))
* Register all components for bevy reflection ([#56](https://github.com/ManevilleF/heron/issues/56)) ([d576779](https://github.com/ManevilleF/heron/commit/d576779c4c18ad8667c2ebe4aa7483bdb204123d))
* Remove rapier feature flags ([054c25c](https://github.com/ManevilleF/heron/commit/054c25c9cbb72a59c31b323c3e9987897ac5402c))
* RotationContraints component ([#66](https://github.com/ManevilleF/heron/issues/66)) ([2686a5d](https://github.com/ManevilleF/heron/commit/2686a5d0675ac80497d48ba2837b3d81e15442ad))
* Runs physics step at most once per frame ([#109](https://github.com/ManevilleF/heron/issues/109)) ([1606a18](https://github.com/ManevilleF/heron/commit/1606a18586b0f56bd9707cc389efed13c4631d93))
* Static bodies ([#32](https://github.com/ManevilleF/heron/issues/32)) ([05718b7](https://github.com/ManevilleF/heron/commit/05718b734668cd48f117d33f6c8e91bc7d1ead49))
* Support changing time scale ([#88](https://github.com/ManevilleF/heron/issues/88)) ([33c5387](https://github.com/ManevilleF/heron/commit/33c538764742b1c2b7a12f9373224e81a4f697d9))
* Support custom collision shapes ([#160](https://github.com/ManevilleF/heron/issues/160)) ([8418c5e](https://github.com/ManevilleF/heron/commit/8418c5e4b3fb0fc4aee3c0255e4197e13ff00754))
* Support defining friction ([#87](https://github.com/ManevilleF/heron/issues/87)) ([c7c9829](https://github.com/ManevilleF/heron/commit/c7c98295e71755584e4787b47b2edda10e986c54))
* Variable timestep mode for PhysicsSteps ([#123](https://github.com/ManevilleF/heron/issues/123)) ([4a646d7](https://github.com/ManevilleF/heron/commit/4a646d75c84c3d9d2404e637c4a4707a061e1ace))


### Bug Fixes

* **2d-debug:** crash when despawning recursivly an entity ([#178](https://github.com/ManevilleF/heron/issues/178)) ([f0cca38](https://github.com/ManevilleF/heron/commit/f0cca387ec994aff5aaf5b5b4e251957564fadfc))
* children lagging behind when the parent rigid body is moved by physics ([#241](https://github.com/ManevilleF/heron/issues/241)) ([a918dbc](https://github.com/ManevilleF/heron/commit/a918dbc9d7d3ba3c4c97ee2c3ca26b1e9a567080))
* **collision-from-mesh:** don't fail if there is no render plugin registered ([#196](https://github.com/ManevilleF/heron/issues/196)) ([155c34c](https://github.com/ManevilleF/heron/commit/155c34c5fd99681c4b0fb1491e70e8134a46e5ff))
* Compilation errors for 3d users ([#125](https://github.com/ManevilleF/heron/issues/125)) ([9de6c8b](https://github.com/ManevilleF/heron/commit/9de6c8bbf52d0176cd8ba61fbe735eb5424387f3))
* Despawn not working if simulation is paused ([#166](https://github.com/ManevilleF/heron/issues/166)) ([31dd01e](https://github.com/ManevilleF/heron/commit/31dd01e3d64e3cdb6c687014134b2d0b9ffcb34e))
* Empty documentation on docs.rs ([652fd5b](https://github.com/ManevilleF/heron/commit/652fd5b2bfdb56e9bea026882dddd74b940d9cef)), closes [#126](https://github.com/ManevilleF/heron/issues/126)
* Events not being fired for kinematic bodies ([#142](https://github.com/ManevilleF/heron/issues/142)) ([2b10f0a](https://github.com/ManevilleF/heron/commit/2b10f0a7dc9947fcfdccabc015b7c59f83e5861e)), closes [#140](https://github.com/ManevilleF/heron/issues/140)
* Frame delay after a spawn/update of the entity transform ([#92](https://github.com/ManevilleF/heron/issues/92)) ([8c2d382](https://github.com/ManevilleF/heron/commit/8c2d382687f1ddd77668f519d6bca4716e0d4353))
* Impossiblity to disable render feature in 2d ([#118](https://github.com/ManevilleF/heron/issues/118)) ([6e0ae98](https://github.com/ManevilleF/heron/commit/6e0ae98fc35c0d8012fc2301cea9accc81c71123))
* Incorrect angular velocity in 2d ([76ce754](https://github.com/ManevilleF/heron/commit/76ce754e8dcf0dab4ee16d10a9b3a14b0f67d121))
* KinematicVelocityBased bodies not updated by Velocity. ([#148](https://github.com/ManevilleF/heron/issues/148)) ([3f416cd](https://github.com/ManevilleF/heron/commit/3f416cd87ae7f5e5e29103f0ae5873af2b49b439))
* make `CollisionData` use `Vec3` normals (instead of `Vec2`) ([#238](https://github.com/ManevilleF/heron/issues/238)) ([9993816](https://github.com/ManevilleF/heron/commit/99938162a18a2386d605ba51dcc89576aa612b6e))
* The acceleration component is now registered for bevy reflection ([ddba070](https://github.com/ManevilleF/heron/commit/ddba07077262d8c8ef7c0430bebfdc0ce16e9a1f))
* Too broad scaling of all shapes with debug mode ([#138](https://github.com/ManevilleF/heron/issues/138)) ([9c4dd9a](https://github.com/ManevilleF/heron/commit/9c4dd9aaa80481d9293cec75ac874b5221b18dba))


### chore

* **deps:** require bevy 0.6 ([#161](https://github.com/ManevilleF/heron/issues/161)) ([bd9c22c](https://github.com/ManevilleF/heron/commit/bd9c22cf942f413aae7266ab8aaae77d2d1ac744))
* **deps:** require bevy 0.7 ([#244](https://github.com/ManevilleF/heron/issues/244)) ([b75ffe2](https://github.com/ManevilleF/heron/commit/b75ffe24bcf310018c387819560caab132d61bdf))
* **deps:** update rapier requirement from ^0.5.0 to ^0.6.1 ([#49](https://github.com/ManevilleF/heron/issues/49)) ([29cb883](https://github.com/ManevilleF/heron/commit/29cb883f2bb2d0d63dcaeabf43e9d985c55da913))
* **deps:** Update rapier to version 0.9 ([#119](https://github.com/ManevilleF/heron/issues/119)) ([d653e84](https://github.com/ManevilleF/heron/commit/d653e84755d09a067beb0bae7b0463367816e9e5))


### Documentation

* Add a CONTRIBUTING.md ([fc2b5a7](https://github.com/ManevilleF/heron/commit/fc2b5a7afdbb446771bbdb1e75df0562a6a16825))
* Add install instructions in readme ([a5df3c7](https://github.com/ManevilleF/heron/commit/a5df3c73f5ed9a70679c983bfe81a661526d25f9))
* Add link to CONTRIBUTING.md in the readme ([a7efe61](https://github.com/ManevilleF/heron/commit/a7efe61dcffe1e0a1058c60374c1269910c92fd9))
* Address typos ([5015fe3](https://github.com/ManevilleF/heron/commit/5015fe3a2751d3dca8663a99237441964902965f))
* **changelog:** Add `BodyHandle` constructor to changelog ([dfb2d92](https://github.com/ManevilleF/heron/commit/dfb2d925bdd91d9b7274bf60254e70db78195848))
* **changelog:** Amend changelog ([aec946c](https://github.com/ManevilleF/heron/commit/aec946c99a963548d8d75cb94dbc0e4ac8cac180))
* **changelog:** Fix typos in last release note ([d91635f](https://github.com/ManevilleF/heron/commit/d91635fbff6bc895503807ccd8568145fe56bd55))
* **changelog:** Make clearer that the `Restitution` component has been removed ([03e9ccc](https://github.com/ManevilleF/heron/commit/03e9ccc4070475969fdafe4aa45de36258f4ca84))
* **changelog:** Mark 0.1.0 as yanked ([3145508](https://github.com/ManevilleF/heron/commit/3145508bed75606d9a473447bcaa2952477014b7))
* **changelog:** Polish before release ([4f99356](https://github.com/ManevilleF/heron/commit/4f993561d8816c3308d97123edc0fc86052cfe16))
* **changelog:** remove reference to semver ([5cebcf3](https://github.com/ManevilleF/heron/commit/5cebcf3eb0392bf8d45499e0d92903fc426d2cd3))
* **changelog:** Typo fix ([#58](https://github.com/ManevilleF/heron/issues/58)) ([5a132bf](https://github.com/ManevilleF/heron/commit/5a132bf6de5d1ba3ed07d4ad5d1b671fd630e11a))
* **changelog:** Update changelog ([bbd92f3](https://github.com/ManevilleF/heron/commit/bbd92f301ddecae049b32ecbf79aa65373176739))
* **changelog:** Update changelog ([da1d10c](https://github.com/ManevilleF/heron/commit/da1d10c66795796b45cddd90161a2e33ce150e87))
* **changelog:** Update the new rapier version ([d7dbf9a](https://github.com/ManevilleF/heron/commit/d7dbf9a9fff7451281bf8c4736208c7a325b5c70))
* clarify that the velocity component can also be used to read the velocity ([#252](https://github.com/ManevilleF/heron/issues/252)) ([994a757](https://github.com/ManevilleF/heron/commit/994a7577ae0e0c8c1f5995640863927befe0d4c5))
* **contributing:** add a note about breaking changes ([64e76e4](https://github.com/ManevilleF/heron/commit/64e76e4cfab7ca9452ec1657a93ab6f4e26111f3))
* **contributing:** Fix issue link ([#46](https://github.com/ManevilleF/heron/issues/46)) ([9f5ce0d](https://github.com/ManevilleF/heron/commit/9f5ce0d0d2834d809552a33e6b165268e2acc822))
* **contributing:** Fix up-for-grabs link ([1155d4d](https://github.com/ManevilleF/heron/commit/1155d4d20b6963af042348f603da4f383b55d529))
* **contributing:** Update contributing guidelines ([1e308e2](https://github.com/ManevilleF/heron/commit/1e308e2066e7efb88f3f867a5e13a391fb0921a4))
* document `collision-from-mesh` feature ([98aad5e](https://github.com/ManevilleF/heron/commit/98aad5e9be82b5cd75f151583fd066e27566703a))
* **examples:** Add a debug example ([#47](https://github.com/ManevilleF/heron/issues/47)) ([2dd2e23](https://github.com/ManevilleF/heron/commit/2dd2e235f2ca7b6c67f65fe960c7b273fc7ef7a1))
* Fix grammar mistakes on docs.rs ([#57](https://github.com/ManevilleF/heron/issues/57)) ([ed540f7](https://github.com/ManevilleF/heron/commit/ed540f73444d169241057185d788bc8673dfeac5))
* Fix setup instruction in readme ([ef0a499](https://github.com/ManevilleF/heron/commit/ef0a4991da30f042dd881e8d74114263a091dda0))
* Guide improvement (in root crate docs) ([455dca5](https://github.com/ManevilleF/heron/commit/455dca5043aaffde49639889c06c47c9b9ad121b))
* **guide:** Add a quickstart section ([#70](https://github.com/ManevilleF/heron/issues/70)) ([b80f644](https://github.com/ManevilleF/heron/commit/b80f644a5d0ad34ccadf4a3d49a06f794e24032a))
* **guide:** Add an (empty) guide ([8e47b08](https://github.com/ManevilleF/heron/commit/8e47b080abc685227139fb2b53676eeaf47f4ac1))
* **guide:** Update maxium number of layers ([#130](https://github.com/ManevilleF/heron/issues/130)) ([0e6b649](https://github.com/ManevilleF/heron/commit/0e6b6491c76bf384d266bc64149c927e3b759d9a))
* hide deprecated members ([8ae6fea](https://github.com/ManevilleF/heron/commit/8ae6fea5e61ccd78448e08ac88ed120b1e67449c))
* mention layers and `Collisions` component from the root crate doc ([1f1a9f5](https://github.com/ManevilleF/heron/commit/1f1a9f5ae27dccaaf5866e889227d5775a34ab89))
* **readme:** Add bevy tracking badge ([2003e5b](https://github.com/ManevilleF/heron/commit/2003e5b1a9b1f1ea5a2f844fc5ded20fad209540))
* **readme:** add link to changelog ([7b72751](https://github.com/ManevilleF/heron/commit/7b727512323d25ec1e45d27afe29c39ab45024ea))
* **readme:** declare MSRV policy ([10b060b](https://github.com/ManevilleF/heron/commit/10b060b44adbbc6b74e727e5f35e90de8d7d1d5d))
* **readme:** Document how the project compare to bevy_rapier ([9a2f03f](https://github.com/ManevilleF/heron/commit/9a2f03f4fcd5fec2e61aa7962b5db662da244a60)), closes [#112](https://github.com/ManevilleF/heron/issues/112)
* **readme:** Document the inconsistent update of rapier2d vs rapier3d in version 0.4.0 ([5046341](https://github.com/ManevilleF/heron/commit/50463411b6003def0a7398b2e71249bf1caa5dbe))
* **readme:** Fix description of cargo feature flag ([7b701f0](https://github.com/ManevilleF/heron/commit/7b701f06fefa902bd4a647f718e139c178248e3c))
* **readme:** Fix links to bevy and rapier ([be1ae6f](https://github.com/ManevilleF/heron/commit/be1ae6faedf376e79fb5644a8ebf663bec20c6f0))
* **readme:** Fix syntax error in example ([#139](https://github.com/ManevilleF/heron/issues/139)) ([2e1b404](https://github.com/ManevilleF/heron/commit/2e1b404918e67dfde7ae0b613f0a6b6a4de5c521))
* **readme:** improve some wording ([#186](https://github.com/ManevilleF/heron/issues/186)) ([bc23307](https://github.com/ManevilleF/heron/commit/bc233073315d85ac5b622bf6528adad1017083b1))
* **readme:** Quick typo fix ([#131](https://github.com/ManevilleF/heron/issues/131)) ([3699075](https://github.com/ManevilleF/heron/commit/36990753b345e54447b63a9fdcecb3739f8f2f51))
* **readme:** remove dependency badge ([b4dd473](https://github.com/ManevilleF/heron/commit/b4dd47380dd09d19e713caa4529dd4bfb663649b))
* **readme:** remove get started section and refer to docs.rs instead ([601b1a9](https://github.com/ManevilleF/heron/commit/601b1a92a3a85af40e98f13ecb4145027168140e))
* **readme:** Remove section about the 'next-bevy' branch ([23d3e50](https://github.com/ManevilleF/heron/commit/23d3e50b0bf09c38af13ceacf4fe1324b5c30b45))
* **readme:** update example to bevy 0.6 syntax ([#191](https://github.com/ManevilleF/heron/issues/191)) ([507f4f4](https://github.com/ManevilleF/heron/commit/507f4f4ef53f34237aa0676f18a52ad73c7da5c1))
* **readme:** Update feature flags section ([0790140](https://github.com/ManevilleF/heron/commit/079014049025517e17a3d85500a5bea591767a91))
* **readme:** Update format for unreleased changes ([2bbc530](https://github.com/ManevilleF/heron/commit/2bbc5309adc35d6c5d4200f7280431f134ba30c9))
* **readme:** Update readme ([7995bcb](https://github.com/ManevilleF/heron/commit/7995bcb3f509e632220d0bd99eaa115c777a756d))
* **readme:** Update setup instructions when using git version of bevy ([076dbd4](https://github.com/ManevilleF/heron/commit/076dbd4cb9d3bc738b6061800f1c3430fe9e5178))
* **readme:** update table of supported bevy versions ([2399065](https://github.com/ManevilleF/heron/commit/23990655eafee79e79f2519590e0ab9f1df9f7cb))
* Rename 'control the position' section ([51972d0](https://github.com/ManevilleF/heron/commit/51972d0d9fb34960858021cdc486736a6df07c6b))
* Replace docs bage ([1a1d9a4](https://github.com/ManevilleF/heron/commit/1a1d9a454e17762a108532021b921f4e9319e3ea))
* Update documentation after [#118](https://github.com/ManevilleF/heron/issues/118) ([42349af](https://github.com/ManevilleF/heron/commit/42349af6d6c0f75a468ca987adb7294caf5a3585))

## [3.0.0](https://github.com/jcornaz/heron/compare/v2.4.1...v3.0.0) (2022-04-17)


### ⚠ BREAKING CHANGES

* require bevy 0.7 (#244)
* require rust 1.60 (#236)
* make `CollisionData` use `Vec3` normals (instead of `Vec2`) (#238)
* remove the `debug-3d` feature (#244)

### Bug Fixes

* avoid pulling unnecessary dependencies for `enhanced-determinism` (#236)


### [2.4.1](https://github.com/jcornaz/heron/compare/v2.4.0...v2.4.1) (2022-04-15)


### Bug Fixes

* children entities lagging behind when the parent is moved by physics ([#241](https://github.com/jcornaz/heron/issues/241)) ([a918dbc](https://github.com/jcornaz/heron/commit/a918dbc9d7d3ba3c4c97ee2c3ca26b1e9a567080))


### Documentation

* document `collision-from-mesh` feature ([98aad5e](https://github.com/jcornaz/heron/commit/98aad5e9be82b5cd75f151583fd066e27566703a))
* hide deprecated members ([8ae6fea](https://github.com/jcornaz/heron/commit/8ae6fea5e61ccd78448e08ac88ed120b1e67449c))
* mention layers and `Collisions` component from the root crate doc ([1f1a9f5](https://github.com/jcornaz/heron/commit/1f1a9f5ae27dccaaf5866e889227d5775a34ab89))
* **readme:** replace "installation" and "feature flags" sections by a referenc to docs.rs ([601b1a9](https://github.com/jcornaz/heron/commit/601b1a92a3a85af40e98f13ecb4145027168140e))


## [2.4.0](https://github.com/jcornaz/heron/compare/v2.3.0...v2.4.0) (2022-04-14)


### Features

* expose CollisionData in Collisions component ([#234](https://github.com/jcornaz/heron/issues/234)) ([96525d8](https://github.com/jcornaz/heron/commit/96525d8aad46b4a22361b046c6476e8c876cdc8f))


### Documentation

* **readme:** declare MSRV policy ([10b060b](https://github.com/jcornaz/heron/commit/10b060b44adbbc6b74e727e5f35e90de8d7d1d5d))


## [2.3.0](https://github.com/jcornaz/heron/compare/v2.2.0...v2.3.0) (2022-03-23)


### Features

* allow to define layers for collision shapes generated by `PendingConvexCollision` ([#224](https://github.com/jcornaz/heron/issues/224)) ([c51c5a1](https://github.com/jcornaz/heron/commit/c51c5a1506f9fb9938d282e1fce68dcef1402551))
* `CollidingEntities` component ([#216](https://github.com/jcornaz/heron/issues/216)) ([2ba2108](https://github.com/jcornaz/heron/commit/2ba210876421e9c4accee5913c02ccb891dc4e01))
* make `CollisionLayers::none` and `CollisionLayers::from_bits` const functions ([#228](https://github.com/jcornaz/heron/issues/228)) ([dbf4b30](https://github.com/jcornaz/heron/commit/dbf4b30a229c2e22f2833c2dd0fa23eca93a74cd))


## [2.2.0](https://github.com/jcornaz/heron/compare/v2.1.0...v2.2.0) (2022-03-07)


### Features

* **debug:** reintroduce the 3d debug renderer (was removed when migrating to bevy 0.6) ([#214](https://github.com/jcornaz/heron/issues/214)) ([4bcbd34](https://github.com/jcornaz/heron/commit/4bcbd34b95426328a724ee3b8313cc72c23c3d86))
* implement `Reflect` for `PendingConvexCollision` ([#213](https://github.com/jcornaz/heron/issues/213)) ([d09192c](https://github.com/jcornaz/heron/commit/d09192c08cf9167a3e1272ff2f92b479b30c2dc3))


## [2.1.0](https://github.com/jcornaz/heron/compare/v2.0.1...v2.1.0) (2022-03-06)


### Features

* add CollisionLayers::all_groups and CollisionLayers::all_masks ([#210](https://github.com/jcornaz/heron/issues/210)) ([62f87b2](https://github.com/jcornaz/heron/commit/62f87b2a18fe523aaca6d443e2ec8aefb8ac17af))
* let `CollisionData::new` accept any implementation of `IntoIterator<Item=Vec2>` ([#211](https://github.com/jcornaz/heron/issues/211)) ([df3169a](https://github.com/jcornaz/heron/commit/df3169ac55b705a88ee363a964ea8c032dcee77a))


### [2.0.1](https://github.com/jcornaz/heron/compare/v2.0.0...v2.0.1) (2022-02-20)


### Bug Fixes

* **collision-from-mesh:** don't fail if there is no render plugin registered ([#196](https://github.com/jcornaz/heron/issues/196)) ([155c34c](https://github.com/jcornaz/heron/commit/155c34c5fd99681c4b0fb1491e70e8134a46e5ff))


## [2.0.0](https://github.com/jcornaz/heron/compare/v1.2.0...v2.0.0) (2022-02-20)


### ⚠ BREAKING CHANGES

* `CollisionEvent` and `CollisionData` no longer implement `Copy`, `Eq`, and `PartialEq`

### Features

* add normals to `CollisionData` in events ([#189](https://github.com/jcornaz/heron/issues/189)) ([b89446c](https://github.com/jcornaz/heron/commit/b89446cc797b24a8a6eb86fdefcfea6b003af87b))


### Documentation

* **readme:** update example to bevy 0.6 syntax ([#191](https://github.com/jcornaz/heron/issues/191)) ([507f4f4](https://github.com/jcornaz/heron/commit/507f4f4ef53f34237aa0676f18a52ad73c7da5c1))


## [1.2.0](https://github.com/jcornaz/heron/compare/v1.1.0...v1.2.0) (2022-02-19)


### Features

* generate collision shapes from mesh via the `PendingConvexCollision` component (behind the `collision-from-mesh` feature flag)  ([#190](https://github.com/jcornaz/heron/issues/190)) ([086a6a6](https://github.com/jcornaz/heron/commit/086a6a6cffaa7d16bd1612555949446c0a07d6a8))



## [1.1.0](https://github.com/jcornaz/heron/compare/v1.0.1...v1.1.0) (2022-01-25)


### Features

* `enhanced-determinism` feature flag ([#180](https://github.com/jcornaz/heron/issues/180)) ([06457df](https://github.com/jcornaz/heron/commit/06457df03db97ff5459af94b4136fd57da4d8908))


## [1.0.1] - 2022-01-23

### Bug fixes

* **2d-debug**: crash when despawning recursivly an entity (#178) 


## [1.0.1-rc.1] - 2022-01-09

### Breaking changes

* Require bevy version 0.6
* Require rust 1.57
* Remove debug-3d feature (This will hopefully be reintroduced when upstream dependencies will be compatible with bevy 0.6)

## [0.13.0] - 2021-12-31

### Breaking changes

* The `CollisionShape` is now marked `#[non_exhaustive]`
* The `AppBuilderExt` trait and the `add_physics_system` is removed
  * This was no longer necessary since #109

### Added

* Cone collision shape (#158)
* Cylinder collision shape (#159)
* Custom collision shape (#160)
* Damping component (#164)

### Fixed

* Despawn not working if simulation is paused


## [0.12.1] - 2021-10-24

## Fixed

* `KinematicVelocityBased` bodies not being moved by velocity (#148).
* Collision events not being fired for kinematic bodies (#142).


## [0.12.0] - 2021-10-24

### Breaking changes

* The `DebugColor` resource no longer implement `From<Color>`. That's because it now defines multiples colors, not one.
* The required version of `rapier` is now `^0.11.1`
* The minimum supported version of rust is now `1.56.0`


### Added

* Debug renderer for 3d, behind the `debug-3d` feature flag (#151).  


### Changed

* The collision shapes now have different colors based on the type of body (static, dynamic, kinematic, sensor).


## 0.11.1 - 2021-08-23

### Bug fixes

* Too broad scaling of all shapes with debug mode (#138)



## 0.11.0 - 2021-07-19

### Breaking changes

* `CollisionShape::Cuboid` and `CollisionShape::ConvexHull` now have `rounded` member (that can be `None`)


### Features

* `PhysicsWorld` system parameter that can be used for ray and shape casting (#129)


## 0.10.1 - 2021-07-19 [YANKED]

### YANKED

This release is yanked because breaking changes have accidentally landed in this minor semver bump.

It has been re-released under the version number `0.11.0` to reflect the presence of breaking changes.

### Breaking changes

* `CollisionShape::Cuboid` and `CollisionShape::ConvexHull` now have `rounded` member (that can be `None`)


### Features

* `PhysicsWorld` system parameter that can be used for ray and shape casting (#129)



## 0.10.0 - 2021-07-12

### Breaking changes

* `PhysicsSteps::duration` now returns a `PhysicsDuration` instead of `Duration`


### Features

* Variable timestep mode for PhysicsSteps (#123)



## 0.9.1 - 2021-06-30

### Bug fixes

* Empty documentation on docs.rs



## 0.9.0 - 2021-06-29

### Breaking changes

* The cargo feature `debug` has been replaced by `debug-2d`. (thanks @zicklag)
* No cargo feature is enabled by default. One must explictly choose between 2d or 3d. (Thanks @zicklag)
* The `heron_rapier::rapier` module has been replaced by `heron_rapier::rapier2` in 2d and `heron_rapier::rapier3d` in 3d.
* Required version of rapier is now ^0.9.2. (Thanks @zicklag)
* RigidBody::Static is replaced by `RigidBody::KinematicPositionBased` and `RigidBody::KinematicVelocityBased`. (Thanks @zicklag)
* The `Layer` trait now works with `u32` instead of `u16`, increasing the maximum number of layers up to 32. (Thanks @zicklag)


### Features

#### 2d

* Preserve Z translation (#120, thanks @zicklag)


### Bug fixes

* Impossiblity to disable render feature in 2d (#118, thanks @zicklag)
* Compilation errors for 3d users (#125)



## 0.8.0 - 2021-06-07

### Breaking changes

* There is a new variant `HeightField` to the `CollisionShape` enum


### Features

* HeightField collision shape (#102, thanks @elegaanz)



## 0.7.0 - 2021-05-31

### Breaking changes

* The `CollisionEvent` now contains a pair of `CollisionData` instead of a pair of `Entity`
* The physics step rate is not defined on the plugin type anymore. It is replaced by a `PhysicsSteps` resource.
* The `IntegrationParameters` can no longer be defined when installing the plugin. The `IntegrationParameters` should should be inserted/mutated instead.
* The `Velocity` and `Transform` are now updated during the `CoreStage::PostUpdate`. If a user-system need to run *after* the physics update, it should explicitly declares that dependency using the `PhysicsSystem` labels.


### Features

* More data in collision events (#103)
* `SensorShape` component to mark individual collision shape as sensor (#104)
* Runs physics step at most once per frame (#109)



## 0.6.0 - 2021-05-24

### Breaking changes

* The `Body` component is renamed to `CollisionShape`
* The `BodyType` component is renamed to `RigidBody` and is now mandatory. (The rigid bodies are no longer automatically "dynamic" when the component is not found)
* The `BodyHandle` component is removed. The rapier's `RigidBodyHandle` and `ColliderHandle` are now used instead.


### Features

* Allow to define (multiple) collision shapes in the child entity of a rigid body (#97)
* Collision layers (#101)


### Bug fixes

* Frame delay after a spawn/update of the entity transform (#92)
* The acceleration component is now registered for bevy reflection



## [0.5.1] - 2021-05-01

### PhysicsTime resource

The `PhysicsTime` resource can be used to change the time-scale of the physics engine.

Thanks @yaymalaga


## [0.5.0] - 2021-04-18

### ⚠ Dependency requirements updated (breaking)

The required version of rapier2d is bumped to ^0.8.0

### ⚠ Support defining friction

A new public field `friction` has been added in `PhysicMaterial`.
As the name suggest, it allows to define the friction that should be applied when two rigid bodies are in contact.

Thanks @yaymalaga


## [0.4.0] - 2021-04-17

### ⚠ Dependency requirements updated (breaking)

The required version of bevy is bumped to ^0.5.0
The required version of rapier2d is bumped to ^0.7.2
The required version of rapier3d is bumped to ^0.8.0

### Feature flags of public dependencies

Heron no longer enables any feature flag for rapier. That way the end-user can freely choose the rapier feature flags.


## [0.3.0] - 2021-03-21

### ⚠ ConvexHull collision shape

There is a new variant in the `Body` enum: `ConvexHull`. It takes a list of points, and the body shape will be the
smallest possible convex shape that includes all the given points.

Thanks @faassen

### Acceleration component

A new `Acceleration` component make possible to apply and linear and angular accelerations.
It is by extension also possible to apply a force if you know the mass: `acceleration.linear = force / mass`.

Thanks @ryo33

### RotationConstraints component

A new `RotationConstraints` component make possible to prevent rotation around the given axes.

### Others

* The opacity has been increased for the default color of debug shapes.


## [0.2.0] - 2021-03-07

### ⚠ Physics systems

The physics step run at a fixed rate (60 updates per second by default). Therefore, it is not in sync with the frame update (that runs as many times per second as possible).

But a user may want to (and sometime have to) run system synchronously with the physics step.

This is why two stages are now public:
* `stage::ROOT`: the root **schedule** stage that contains the physics step and run at a fixed rate (60 updates per second by default)
* `stage::UPDATE`: a **child** (parallel) system stage that runs before each physics step

But most of the time, users shouldn't have to use the stage directly,
because an `add_physics_system` extension function on `AppBuilder` is provided and can be used like `add_system`, except
systems added with `add_physics_system` will run during the physics update.

**This is a breaking change:** Updating the transforms/velocities or any other physics component of rigid bodies **must** be done in the physics update stage.
Make sure to add theses systems using the new `add_physics_system` extension function on `AppBuilder`.


### ⚠ New `PhysicMaterial` component that replaces `Restitution` (breaking)

There is now a `PhysicMaterial` component which can be used to define both the restitution (how bouncy) and density (how heavy) the material is.

In the future it will be extended to define more physics properties, like the friction.

Since the restitution is now defined in `PhysicMaterial`, the `Restitution` component has been removed.

### ⚠ Kinematic bodies

There is a new variant to `BodyType`: `Kinematic`. That makes possible to create "kinematic" bodies.
A kinematic body is controlled programmatically (usually by updating the transform) and affect the other bodies normally, 
but is not affected by them.


### ⚠ Dependency requirements updated (breaking)

The required version of rapier is bumped to ^0.6.1

### All components are registered for reflection

All components now implement `Default` and `Reflect` and are registered to bevy reflect system.
That should make be possible to use heron components in serialized scene for hot-reloading.


### Public constructor to `BodyHandle`

`BodyHandle` now has a public constructor. Advanced users may create rigid bodies and colliders using directly the rapier API (adding them to the `RigidBodySet` and `ColliderSet` resources), and then add a `BodyHandle` component to the entity so that heron's will handle velocity and update the bevy transforms.

Tanks @MGlolenstine


## [0.1.1] - 2021-02-16

### ⚠ Fix incorrect internal version requirements

A problem happened during the release of `0.1.0`, and some crates (incl. the root crate `heron`)
were requiring invalid version of the other heron crates.


## [0.1.0] - 2021-02-15 [YANKED]

### ⚠ Dependency requirement updated (breaking)

The required rapier version is now >= 0.5.0 < 0.6.0.


### ⚠ New collision shapes (breaking)

The variants `Body::Capsule` and `Body::Cuboid` have been added, allowing creating respectively capsule and cuboid
collision shapes


### New `BodyType` component

By default, the rigid-bodies are *dynamic*. A `BodyType` can be attached to make it:
* Static (with `BodyType::Static`) so that it doesn't move.
* Sensor (with `BodyType::Sensor`) so it doesn't move and doesn't affect other bodies. (Only useful for listening to collision events)


### Fixes

* Misplaced debug render at startup
* Incorrect angular velocity in 2d

## [0.1.0-alpha.1] - 2021-01-30

### Features flags

* `3d` (enabled by default) Enable simulation on the 3 axes `x`, `y`, and `z`. Incompatible with the feature `2d`.
* `2d` Enable simulation only on the first 2 axes `x` and `y`. Incompatible with the feature `3d`, therefore require to
  disable the default features.
* `debug` Render collision shapes. Works only in 2d for now, support for 3d will be added later.

Important: Either `2d` or `3d` (but not both) must be enabled. If none or both of theses two features are enabled,
the `PhysicsPlugin` won't be available.

### PhysicsPlugin plugin

Add the `PhysicsPlugin` to setup collision detection and physics simulation. It also registers rapier's `RigidBodySet`
, `ColliderSet`, `JointSet`, `IntegrationParameters`, `BroadPhase` and `NarrowPhase` in the resources.

### Gravity resource

The resource `Gravity` defines the world's gravity. Gravity is disabled by default. You may override or mutate
the `Gravity` resource to change the world's gravity.

### Body component

A `Body` component can be added to make the entity a *dynamic* rigid body with the given shape.

The position of the body is defined by the bevy `GlobalTransform` component. Updating the `GlobalTransform`, will
teleport the body ignoring physics rules.

Every frame the `Transform` will be updated to reflect the body position in the world.

Heron will automatically handle replacement and removal of the body (when the component mutated/removed or when the
entity is despawned)

At the moment, only spheres are supported. More shape will be added in the future. Support for static and kinematic
bodies will be added later too.

### Velocity component

Add the `Velocity` component to an entity to define/update or read the velocity of a dynamic body.

The entity, must also have a `Body` component and a `GlobalTransform`.

### Restitution component

The `Restitution` component can be added to define the restitution coefficient of a body.

### CollisionEvent event

One can read from `Events<CollisionEvent>` to be notified when collisions start and stop.



[Unreleased]: ../../compare/v1.0.1...HEAD
[1.0.1]: ../../compare/v1.0.1-rc.1...v1.0.1
[1.0.1-rc.1]: ../../compare/v0.13.0...v1.0.1-rc.1
[0.13.0]: ../../compare/v0.12.1...v0.13.0
[0.12.1]: ../../compare/v0.12.0...v0.12.1
[0.12.0]: ../../compare/v0.11.1...v0.12.0
[0.5.1]: ../../compare/v0.5.0...v0.5.1
[0.5.0]: ../../compare/v0.4.0...v0.5.0
[0.4.0]: ../../compare/v0.3.0...v0.4.0
[0.3.0]: ../../compare/v0.2.0...v0.3.0
[0.2.0]: ../../compare/v0.1.1...v0.2.0
[0.1.1]: ../../compare/v0.1.0...v0.1.1
[0.1.0]: ../../compare/v0.1.0-alpha.1...v0.1.0
[0.1.0-alpha.1]: ../../compare/...v0.1.0-alpha.1
